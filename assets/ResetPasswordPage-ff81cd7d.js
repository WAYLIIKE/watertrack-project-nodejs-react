import{u as g,J as v,K as S,r as a,j as s,M as k,O as C,H as R}from"./index-5106d614.js";import{C as E,P as T}from"./Page-3b219676.js";import{A as $}from"./AdvantagesSection-2cdb6233.js";import{u as W,o as q}from"./yup-3828f20b.js";import{c as A,a as _,d as B,I as h,b as w}from"./index.esm-21dd7b46.js";import"./iconBase-63b7fd08.js";const F="_laptop_16y8n_2",I="_picture_16y8n_10",V="_loader_16y8n_1",f={laptop:F,picture:I,"visually-hidden":"_visually-hidden_16y8n_1","close-modal-btn":"_close-modal-btn_16y8n_1",loader:V},H="_wrapper_1f1yu_1",O="_form_1f1yu_12",Z="_title_1f1yu_19",z="_label_1f1yu_31",D="_input_1f1yu_40",J="_submitButton_1f1yu_69",K="_inputWrapper_1f1yu_89",M="_icon_1f1yu_94",G="_error_1f1yu_104",L="_loader_1f1yu_1",e={wrapper:H,form:O,title:Z,label:z,input:D,submitButton:J,inputWrapper:K,icon:M,error:G,"visually-hidden":"_visually-hidden_1f1yu_1","close-modal-btn":"_close-modal-btn_1f1yu_1",loader:L},Q=A().shape({newPass:_().matches(/^(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$/,"Password must be at least 8 characters long, contain at least one uppercase letter, and at least one digit").required("Please, enter new password").min(8,"Password is too short - should be 8 chars minimum."),repeatPass:_().oneOf([B("newPass")],"Passwords must match").required("Please, repeat new password")}),U=()=>{const r=g(),{resetToken:n}=v(),o=S(),[p,u]=a.useState(null),[i,P]=a.useState(!1),[l,x]=a.useState(!1),y=()=>{P(!i)},j=()=>{x(!l)},{register:d,handleSubmit:b,formState:{errors:t}}=W({resolver:q(Q)}),N=async m=>{const{newPass:c}=m;(await r(k({newPass:c,resetToken:n}))).meta.requestStatus==="fulfilled"&&o("/signin")};return a.useEffect(()=>{(async()=>{try{(await r(C(n))).meta.requestStatus==="fulfilled"?u(!0):u(!1)}catch{return}})()},[r,n]),a.useEffect(()=>{p===!1&&o("/not-found-page")},[o,p]),s.jsxs("div",{className:e.wrapper,children:[s.jsx("h2",{className:e.title,children:"Change the password "}),s.jsxs("form",{className:e.form,onSubmit:b(N),children:[s.jsx("label",{className:e.label,htmlFor:"newPass",children:"Enter new password:"}),t.newPass&&s.jsxs("span",{className:e.error,children:[t.newPass.message," "]}),s.jsxs("div",{className:e.inputWrapper,children:[s.jsx("input",{...d("newPass"),className:e.input,type:i?"text":"password",name:"newPass",id:"newPass"}),s.jsx("div",{className:e.icon,onClick:y,children:i?s.jsx(h,{}):s.jsx(w,{})})]}),s.jsx("label",{className:e.label,htmlFor:"repeatPass",children:"Repeat new password:"}),t.repeatPass&&s.jsxs("span",{className:e.error,children:[t.repeatPass.message," "]}),s.jsxs("div",{className:e.inputWrapper,children:[s.jsx("input",{...d("repeatPass"),className:e.input,type:l?"text":"password",name:"repeatPass",id:"repeatPass"}),s.jsx("div",{className:e.icon,onClick:j,children:l?s.jsx(h,{}):s.jsx(w,{})})]}),s.jsx("button",{className:e.submitButton,type:"submit",children:"Change"})]})]})};function ns(){return s.jsxs(E,{children:[s.jsx(R,{children:s.jsx("title",{children:"Password reset"})}),s.jsx(T,{children:s.jsxs("div",{className:f.laptop,children:[s.jsx(U,{}),s.jsx("div",{className:f.picture,children:s.jsx($,{})})]})})]})}export{ns as default};
