import{B as P}from"./index-4fc38a0a.js";var fe=e=>e.type==="checkbox",ie=e=>e instanceof Date,L=e=>e==null;const Ze=e=>typeof e=="object";var p=e=>!L(e)&&!Array.isArray(e)&&Ze(e)&&!ie(e),gr=e=>p(e)&&e.target?fe(e.target)?e.target.checked:e.target.value:e,_r=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,br=(e,s)=>e.has(_r(s)),Vr=e=>{const s=e.constructor&&e.constructor.prototype;return p(s)&&s.hasOwnProperty("isPrototypeOf")},pe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function B(e){let s;const r=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(pe&&(e instanceof Blob||e instanceof FileList))&&(r||p(e)))if(s=r?[]:{},!r&&!Vr(e))s=e;else for(const u in e)e.hasOwnProperty(u)&&(s[u]=B(e[u]));else return e;return s}var ce=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,y=(e,s,r)=>{if(!s||!p(e))return r;const u=ce(s.split(/[,[\].]+?/)).reduce((l,n)=>L(l)?l:l[n],e);return D(u)||u===e?D(e[s])?r:e[s]:u},K=e=>typeof e=="boolean";const je={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},q={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};P.createContext(null);var Fr=(e,s,r,u=!0)=>{const l={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(l,n,{get:()=>{const d=n;return s._proxyFormState[d]!==q.all&&(s._proxyFormState[d]=!u||q.all),r&&(r[d]=!0),e[d]}});return l},R=e=>p(e)&&!Object.keys(e).length,Ar=(e,s,r,u)=>{r(e);const{name:l,...n}=e;return R(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(d=>s[d]===(!u||q.all))},me=e=>Array.isArray(e)?e:[e];function xr(e){const s=P.useRef(e);s.current=e,P.useEffect(()=>{const r=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var W=e=>typeof e=="string",wr=(e,s,r,u,l)=>W(e)?(u&&s.watch.add(e),y(r,e,l)):Array.isArray(e)?e.map(n=>(u&&s.watch.add(n),y(r,n))):(u&&(s.watchAll=!0),r),Oe=e=>/^\w*$/.test(e),er=e=>ce(e.replace(/["|']|\]/g,"").split(/\.|\[/)),x=(e,s,r)=>{let u=-1;const l=Oe(s)?[s]:er(s),n=l.length,d=n-1;for(;++u<n;){const h=l[u];let m=r;if(u!==d){const w=e[h];m=p(w)||Array.isArray(w)?w:isNaN(+l[u+1])?{}:[]}e[h]=m,e=e[h]}return e},rr=(e,s,r,u,l)=>s?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[u]:l||!0}}:{},He=e=>({isOnSubmit:!e||e===q.onSubmit,isOnBlur:e===q.onBlur,isOnChange:e===q.onChange,isOnAll:e===q.all,isOnTouch:e===q.onTouched}),$e=(e,s,r)=>!r&&(s.watchAll||s.watch.has(e)||[...s.watch].some(u=>e.startsWith(u)&&/^\.\w+/.test(e.slice(u.length))));const oe=(e,s,r,u)=>{for(const l of r||Object.keys(e)){const n=y(e,l);if(n){const{_f:d,...h}=n;if(d){if(d.refs&&d.refs[0]&&s(d.refs[0],l)&&!u)break;if(d.ref&&s(d.ref,d.name)&&!u)break;oe(h,s)}else p(h)&&oe(h,s)}}};var Dr=(e,s,r)=>{const u=ce(y(e,r));return x(u,"root",s[r]),x(e,r,u),e},Te=e=>e.type==="file",J=e=>typeof e=="function",ge=e=>{if(!pe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},he=e=>W(e),Le=e=>e.type==="radio",_e=e=>e instanceof RegExp;const Ke={value:!1,isValid:!1},Ye={value:!0,isValid:!0};var tr=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?Ye:{value:e[0].value,isValid:!0}:Ye:Ke}return Ke};const ze={isValid:!1,value:null};var sr=e=>Array.isArray(e)?e.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,ze):ze;function Ge(e,s,r="validate"){if(he(e)||Array.isArray(e)&&e.every(he)||K(e)&&!e)return{type:r,message:he(e)?e:"",ref:s}}var se=e=>p(e)&&!_e(e)?e:{value:e,message:""},Je=async(e,s,r,u,l)=>{const{ref:n,refs:d,required:h,maxLength:m,minLength:w,min:b,max:g,pattern:Q,validate:Y,name:U,valueAsNumber:Fe,mount:z,disabled:G}=e._f,V=y(s,U);if(!z||G)return{};const j=d?d[0]:n,H=_=>{u&&j.reportValidity&&(j.setCustomValidity(K(_)?"":_||""),j.reportValidity())},k={},ee=Le(n),de=fe(n),X=ee||de,re=(Fe||Te(n))&&D(n.value)&&D(V)||ge(n)&&n.value===""||V===""||Array.isArray(V)&&!V.length,N=rr.bind(null,U,r,k),ye=(_,F,E,T=$.maxLength,I=$.minLength)=>{const M=_?F:E;k[U]={type:_?T:I,message:M,ref:n,...N(_?T:I,M)}};if(l?!Array.isArray(V)||!V.length:h&&(!X&&(re||L(V))||K(V)&&!V||de&&!tr(d).isValid||ee&&!sr(d).isValid)){const{value:_,message:F}=he(h)?{value:!!h,message:h}:se(h);if(_&&(k[U]={type:$.required,message:F,ref:j,...N($.required,F)},!r))return H(F),k}if(!re&&(!L(b)||!L(g))){let _,F;const E=se(g),T=se(b);if(!L(V)&&!isNaN(V)){const I=n.valueAsNumber||V&&+V;L(E.value)||(_=I>E.value),L(T.value)||(F=I<T.value)}else{const I=n.valueAsDate||new Date(V),M=ae=>new Date(new Date().toDateString()+" "+ae),ne=n.type=="time",ue=n.type=="week";W(E.value)&&V&&(_=ne?M(V)>M(E.value):ue?V>E.value:I>new Date(E.value)),W(T.value)&&V&&(F=ne?M(V)<M(T.value):ue?V<T.value:I<new Date(T.value))}if((_||F)&&(ye(!!_,E.message,T.message,$.max,$.min),!r))return H(k[U].message),k}if((m||w)&&!re&&(W(V)||l&&Array.isArray(V))){const _=se(m),F=se(w),E=!L(_.value)&&V.length>+_.value,T=!L(F.value)&&V.length<+F.value;if((E||T)&&(ye(E,_.message,F.message),!r))return H(k[U].message),k}if(Q&&!re&&W(V)){const{value:_,message:F}=se(Q);if(_e(_)&&!V.match(_)&&(k[U]={type:$.pattern,message:F,ref:n,...N($.pattern,F)},!r))return H(F),k}if(Y){if(J(Y)){const _=await Y(V,s),F=Ge(_,j);if(F&&(k[U]={...F,...N($.validate,F.message)},!r))return H(F.message),k}else if(p(Y)){let _={};for(const F in Y){if(!R(_)&&!r)break;const E=Ge(await Y[F](V,s),j,F);E&&(_={...E,...N(F,E.message)},H(E.message),r&&(k[U]=_))}if(!R(_)&&(k[U]={ref:j,..._},!r))return k}}return H(!0),k};function mr(e,s){const r=s.slice(0,-1).length;let u=0;for(;u<r;)e=D(e)?u++:e[s[u++]];return e}function kr(e){for(const s in e)if(e.hasOwnProperty(s)&&!D(e[s]))return!1;return!0}function S(e,s){const r=Array.isArray(s)?s:Oe(s)?[s]:er(s),u=r.length===1?e:mr(e,r),l=r.length-1,n=r[l];return u&&delete u[n],l!==0&&(p(u)&&R(u)||Array.isArray(u)&&kr(u))&&S(e,r.slice(0,-1)),e}var ke=()=>{let e=[];return{get observers(){return e},next:l=>{for(const n of e)n.next&&n.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(n=>n!==l)}}),unsubscribe:()=>{e=[]}}},be=e=>L(e)||!Ze(e);function Z(e,s){if(be(e)||be(s))return e===s;if(ie(e)&&ie(s))return e.getTime()===s.getTime();const r=Object.keys(e),u=Object.keys(s);if(r.length!==u.length)return!1;for(const l of r){const n=e[l];if(!u.includes(l))return!1;if(l!=="ref"){const d=s[l];if(ie(n)&&ie(d)||p(n)&&p(d)||Array.isArray(n)&&Array.isArray(d)?!Z(n,d):n!==d)return!1}}return!0}var ir=e=>e.type==="select-multiple",Er=e=>Le(e)||fe(e),Ee=e=>ge(e)&&e.isConnected,nr=e=>{for(const s in e)if(J(e[s]))return!0;return!1};function Ve(e,s={}){const r=Array.isArray(e);if(p(e)||r)for(const u in e)Array.isArray(e[u])||p(e[u])&&!nr(e[u])?(s[u]=Array.isArray(e[u])?[]:{},Ve(e[u],s[u])):L(e[u])||(s[u]=!0);return s}function ur(e,s,r){const u=Array.isArray(e);if(p(e)||u)for(const l in e)Array.isArray(e[l])||p(e[l])&&!nr(e[l])?D(s)||be(r[l])?r[l]=Array.isArray(e[l])?Ve(e[l],[]):{...Ve(e[l])}:ur(e[l],L(s)?{}:s[l],r[l]):r[l]=!Z(e[l],s[l]);return r}var ve=(e,s)=>ur(e,s,Ve(s)),ar=(e,{valueAsNumber:s,valueAsDate:r,setValueAs:u})=>D(e)?e:s?e===""?NaN:e&&+e:r&&W(e)?new Date(e):u?u(e):e;function Se(e){const s=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):s.disabled))return Te(s)?s.files:Le(s)?sr(e.refs).value:ir(s)?[...s.selectedOptions].map(({value:r})=>r):fe(s)?tr(e.refs).value:ar(D(s.value)?e.ref.value:s.value,e)}var Sr=(e,s,r,u)=>{const l={};for(const n of e){const d=y(s,n);d&&x(l,n,d._f)}return{criteriaMode:r,names:[...e],fields:l,shouldUseNativeValidation:u}},le=e=>D(e)?e:_e(e)?e.source:p(e)?_e(e.value)?e.value.source:e.value:e,pr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Qe(e,s,r){const u=y(e,r);if(u||Oe(r))return{error:u,name:r};const l=r.split(".");for(;l.length;){const n=l.join("."),d=y(s,n),h=y(e,n);if(d&&!Array.isArray(d)&&r!==n)return{name:r};if(h&&h.type)return{name:n,error:h};l.pop()}return{name:r}}var Or=(e,s,r,u,l)=>l.isOnAll?!1:!r&&l.isOnTouch?!(s||e):(r?u.isOnBlur:l.isOnBlur)?!e:(r?u.isOnChange:l.isOnChange)?e:!0,Tr=(e,s)=>!ce(y(e,s)).length&&S(e,s);const Lr={mode:q.onSubmit,reValidateMode:q.onChange,shouldFocusError:!0};function Ur(e={}){let s={...Lr,...e},r={submitCount:0,isDirty:!1,isLoading:J(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},u={},l=p(s.defaultValues)||p(s.values)?B(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:B(l),d={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},m,w=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={values:ke(),array:ke(),state:ke()},Q=He(s.mode),Y=He(s.reValidateMode),U=s.criteriaMode===q.all,Fe=t=>i=>{clearTimeout(w),w=setTimeout(t,i)},z=async t=>{if(b.isValid||t){const i=s.resolver?R((await X()).errors):await N(u,!0);i!==r.isValid&&g.state.next({isValid:i})}},G=(t,i)=>{(b.isValidating||b.validatingFields)&&((t||Array.from(h.mount)).forEach(a=>{a&&(i?x(r.validatingFields,a,i):S(r.validatingFields,a))}),g.state.next({validatingFields:r.validatingFields,isValidating:!R(r.validatingFields)}))},V=(t,i=[],a,c,f=!0,o=!0)=>{if(c&&a){if(d.action=!0,o&&Array.isArray(y(u,t))){const v=a(y(u,t),c.argA,c.argB);f&&x(u,t,v)}if(o&&Array.isArray(y(r.errors,t))){const v=a(y(r.errors,t),c.argA,c.argB);f&&x(r.errors,t,v),Tr(r.errors,t)}if(b.touchedFields&&o&&Array.isArray(y(r.touchedFields,t))){const v=a(y(r.touchedFields,t),c.argA,c.argB);f&&x(r.touchedFields,t,v)}b.dirtyFields&&(r.dirtyFields=ve(l,n)),g.state.next({name:t,isDirty:_(t,i),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else x(n,t,i)},j=(t,i)=>{x(r.errors,t,i),g.state.next({errors:r.errors})},H=t=>{r.errors=t,g.state.next({errors:r.errors,isValid:!1})},k=(t,i,a,c)=>{const f=y(u,t);if(f){const o=y(n,t,D(a)?y(l,t):a);D(o)||c&&c.defaultChecked||i?x(n,t,i?o:Se(f._f)):T(t,o),d.mount&&z()}},ee=(t,i,a,c,f)=>{let o=!1,v=!1;const A={name:t},O=!!(y(u,t)&&y(u,t)._f.disabled);if(!a||c){b.isDirty&&(v=r.isDirty,r.isDirty=A.isDirty=_(),o=v!==A.isDirty);const C=O||Z(y(l,t),i);v=!!(!O&&y(r.dirtyFields,t)),C||O?S(r.dirtyFields,t):x(r.dirtyFields,t,!0),A.dirtyFields=r.dirtyFields,o=o||b.dirtyFields&&v!==!C}if(a){const C=y(r.touchedFields,t);C||(x(r.touchedFields,t,a),A.touchedFields=r.touchedFields,o=o||b.touchedFields&&C!==a)}return o&&f&&g.state.next(A),o?A:{}},de=(t,i,a,c)=>{const f=y(r.errors,t),o=b.isValid&&K(i)&&r.isValid!==i;if(e.delayError&&a?(m=Fe(()=>j(t,a)),m(e.delayError)):(clearTimeout(w),m=null,a?x(r.errors,t,a):S(r.errors,t)),(a?!Z(f,a):f)||!R(c)||o){const v={...c,...o&&K(i)?{isValid:i}:{},errors:r.errors,name:t};r={...r,...v},g.state.next(v)}},X=async t=>{G(t,!0);const i=await s.resolver(n,s.context,Sr(t||h.mount,u,s.criteriaMode,s.shouldUseNativeValidation));return G(t),i},re=async t=>{const{errors:i}=await X(t);if(t)for(const a of t){const c=y(i,a);c?x(r.errors,a,c):S(r.errors,a)}else r.errors=i;return i},N=async(t,i,a={valid:!0})=>{for(const c in t){const f=t[c];if(f){const{_f:o,...v}=f;if(o){const A=h.array.has(o.name);G([c],!0);const O=await Je(f,n,U,s.shouldUseNativeValidation&&!i,A);if(G([c]),O[o.name]&&(a.valid=!1,i))break;!i&&(y(O,o.name)?A?Dr(r.errors,O,o.name):x(r.errors,o.name,O[o.name]):S(r.errors,o.name))}v&&await N(v,i,a)}}return a.valid},ye=()=>{for(const t of h.unMount){const i=y(u,t);i&&(i._f.refs?i._f.refs.every(a=>!Ee(a)):!Ee(i._f.ref))&&Ae(t)}h.unMount=new Set},_=(t,i)=>(t&&i&&x(n,t,i),!Z(Ue(),l)),F=(t,i,a)=>wr(t,h,{...d.mount?n:D(i)?l:W(t)?{[t]:i}:i},a,i),E=t=>ce(y(d.mount?n:l,t,e.shouldUnregister?y(l,t,[]):[])),T=(t,i,a={})=>{const c=y(u,t);let f=i;if(c){const o=c._f;o&&(!o.disabled&&x(n,t,ar(i,o)),f=ge(o.ref)&&L(i)?"":i,ir(o.ref)?[...o.ref.options].forEach(v=>v.selected=f.includes(v.value)):o.refs?fe(o.ref)?o.refs.length>1?o.refs.forEach(v=>(!v.defaultChecked||!v.disabled)&&(v.checked=Array.isArray(f)?!!f.find(A=>A===v.value):f===v.value)):o.refs[0]&&(o.refs[0].checked=!!f):o.refs.forEach(v=>v.checked=v.value===f):Te(o.ref)?o.ref.value="":(o.ref.value=f,o.ref.type||g.values.next({name:t,values:{...n}})))}(a.shouldDirty||a.shouldTouch)&&ee(t,f,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ae(t)},I=(t,i,a)=>{for(const c in i){const f=i[c],o=`${t}.${c}`,v=y(u,o);(h.array.has(t)||!be(f)||v&&!v._f)&&!ie(f)?I(o,f,a):T(o,f,a)}},M=(t,i,a={})=>{const c=y(u,t),f=h.array.has(t),o=B(i);x(n,t,o),f?(g.array.next({name:t,values:{...n}}),(b.isDirty||b.dirtyFields)&&a.shouldDirty&&g.state.next({name:t,dirtyFields:ve(l,n),isDirty:_(t,o)})):c&&!c._f&&!L(o)?I(t,o,a):T(t,o,a),$e(t,h)&&g.state.next({...r}),g.values.next({name:d.mount?t:void 0,values:{...n}})},ne=async t=>{d.mount=!0;const i=t.target;let a=i.name,c=!0;const f=y(u,a),o=()=>i.type?Se(f._f):gr(t),v=A=>{c=Number.isNaN(A)||A===y(n,a,A)};if(f){let A,O;const C=o(),te=t.type===je.BLUR||t.type===je.FOCUS_OUT,yr=!pr(f._f)&&!s.resolver&&!y(r.errors,a)&&!f._f.deps||Or(te,y(r.touchedFields,a),r.isSubmitted,Y,Q),we=$e(a,h,te);x(n,a,C),te?(f._f.onBlur&&f._f.onBlur(t),m&&m(0)):f._f.onChange&&f._f.onChange(t);const De=ee(a,C,te,!1),vr=!R(De)||we;if(!te&&g.values.next({name:a,type:t.type,values:{...n}}),yr)return b.isValid&&z(),vr&&g.state.next({name:a,...we?{}:De});if(!te&&we&&g.state.next({...r}),s.resolver){const{errors:qe}=await X([a]);if(v(C),c){const hr=Qe(r.errors,u,a),We=Qe(qe,u,hr.name||a);A=We.error,a=We.name,O=R(qe)}}else G([a],!0),A=(await Je(f,n,U,s.shouldUseNativeValidation))[a],G([a]),v(C),c&&(A?O=!1:b.isValid&&(O=await N(u,!0)));c&&(f._f.deps&&ae(f._f.deps),de(a,O,A,De))}},ue=(t,i)=>{if(y(r.errors,i)&&t.focus)return t.focus(),1},ae=async(t,i={})=>{let a,c;const f=me(t);if(s.resolver){const o=await re(D(t)?t:f);a=R(o),c=t?!f.some(v=>y(o,v)):a}else t?(c=(await Promise.all(f.map(async o=>{const v=y(u,o);return await N(v&&v._f?{[o]:v}:v)}))).every(Boolean),!(!c&&!r.isValid)&&z()):c=a=await N(u);return g.state.next({...!W(t)||b.isValid&&a!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:a}:{},errors:r.errors}),i.shouldFocus&&!c&&oe(u,ue,t?f:h.mount),c},Ue=t=>{const i={...d.mount?n:l};return D(t)?i:W(t)?y(i,t):t.map(a=>y(i,a))},Ce=(t,i)=>({invalid:!!y((i||r).errors,t),isDirty:!!y((i||r).dirtyFields,t),isTouched:!!y((i||r).touchedFields,t),isValidating:!!y((i||r).validatingFields,t),error:y((i||r).errors,t)}),or=t=>{t&&me(t).forEach(i=>S(r.errors,i)),g.state.next({errors:t?r.errors:{}})},Re=(t,i,a)=>{const c=(y(u,t,{_f:{}})._f||{}).ref;x(r.errors,t,{...i,ref:c}),g.state.next({name:t,errors:r.errors,isValid:!1}),a&&a.shouldFocus&&c&&c.focus&&c.focus()},fr=(t,i)=>J(t)?g.values.subscribe({next:a=>t(F(void 0,i),a)}):F(t,i,!0),Ae=(t,i={})=>{for(const a of t?me(t):h.mount)h.mount.delete(a),h.array.delete(a),i.keepValue||(S(u,a),S(n,a)),!i.keepError&&S(r.errors,a),!i.keepDirty&&S(r.dirtyFields,a),!i.keepTouched&&S(r.touchedFields,a),!i.keepIsValidating&&S(r.validatingFields,a),!s.shouldUnregister&&!i.keepDefaultValue&&S(l,a);g.values.next({values:{...n}}),g.state.next({...r,...i.keepDirty?{isDirty:_()}:{}}),!i.keepIsValid&&z()},Ne=({disabled:t,name:i,field:a,fields:c,value:f})=>{if(K(t)){const o=t?void 0:D(f)?Se(a?a._f:y(c,i)._f):f;x(n,i,o),ee(i,o,!1,!1,!0)}},xe=(t,i={})=>{let a=y(u,t);const c=K(i.disabled);return x(u,t,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:t}},name:t,mount:!0,...i}}),h.mount.add(t),a?Ne({field:a,disabled:i.disabled,name:t,value:i.value}):k(t,!0,i.value),{...c?{disabled:i.disabled}:{},...s.progressive?{required:!!i.required,min:le(i.min),max:le(i.max),minLength:le(i.minLength),maxLength:le(i.maxLength),pattern:le(i.pattern)}:{},name:t,onChange:ne,onBlur:ne,ref:f=>{if(f){xe(t,i),a=y(u,t);const o=D(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,v=Er(o),A=a._f.refs||[];if(v?A.find(O=>O===o):o===a._f.ref)return;x(u,t,{_f:{...a._f,...v?{refs:[...A.filter(Ee),o,...Array.isArray(y(l,t))?[{}]:[]],ref:{type:o.type,name:t}}:{ref:o}}}),k(t,!1,void 0,o)}else a=y(u,t,{}),a._f&&(a._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(br(h.array,t)&&d.action)&&h.unMount.add(t)}}},Me=()=>s.shouldFocusError&&oe(u,ue,h.mount),cr=t=>{K(t)&&(g.state.next({disabled:t}),oe(u,(i,a)=>{let c=t;const f=y(u,a);f&&K(f._f.disabled)&&(c||(c=f._f.disabled)),i.disabled=c},0,!1))},Be=(t,i)=>async a=>{let c;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let f=B(n);if(g.state.next({isSubmitting:!0}),s.resolver){const{errors:o,values:v}=await X();r.errors=o,f=v}else await N(u);if(S(r.errors,"root"),R(r.errors)){g.state.next({errors:{}});try{await t(f,a)}catch(o){c=o}}else i&&await i({...r.errors},a),Me(),setTimeout(Me);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:R(r.errors)&&!c,submitCount:r.submitCount+1,errors:r.errors}),c)throw c},dr=(t,i={})=>{y(u,t)&&(D(i.defaultValue)?M(t,B(y(l,t))):(M(t,i.defaultValue),x(l,t,B(i.defaultValue))),i.keepTouched||S(r.touchedFields,t),i.keepDirty||(S(r.dirtyFields,t),r.isDirty=i.defaultValue?_(t,B(y(l,t))):_()),i.keepError||(S(r.errors,t),b.isValid&&z()),g.state.next({...r}))},Pe=(t,i={})=>{const a=t?B(t):l,c=B(a),f=R(t),o=f?l:c;if(i.keepDefaultValues||(l=a),!i.keepValues){if(i.keepDirtyValues)for(const v of h.mount)y(r.dirtyFields,v)?x(o,v,y(n,v)):M(v,y(o,v));else{if(pe&&D(t))for(const v of h.mount){const A=y(u,v);if(A&&A._f){const O=Array.isArray(A._f.refs)?A._f.refs[0]:A._f.ref;if(ge(O)){const C=O.closest("form");if(C){C.reset();break}}}}u={}}n=e.shouldUnregister?i.keepDefaultValues?B(l):{}:B(o),g.array.next({values:{...o}}),g.values.next({values:{...o}})}h={mount:i.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!b.isValid||!!i.keepIsValid||!!i.keepDirtyValues,d.watch=!!e.shouldUnregister,g.state.next({submitCount:i.keepSubmitCount?r.submitCount:0,isDirty:f?!1:i.keepDirty?r.isDirty:!!(i.keepDefaultValues&&!Z(t,l)),isSubmitted:i.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:f?[]:i.keepDirtyValues?i.keepDefaultValues&&n?ve(l,n):r.dirtyFields:i.keepDefaultValues&&t?ve(l,t):{},touchedFields:i.keepTouched?r.touchedFields:{},errors:i.keepErrors?r.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ie=(t,i)=>Pe(J(t)?t(n):t,i);return{control:{register:xe,unregister:Ae,getFieldState:Ce,handleSubmit:Be,setError:Re,_executeSchema:X,_getWatch:F,_getDirty:_,_updateValid:z,_removeUnmounted:ye,_updateFieldArray:V,_updateDisabledField:Ne,_getFieldArray:E,_reset:Pe,_resetDefaultValues:()=>J(s.defaultValues)&&s.defaultValues().then(t=>{Ie(t,s.resetOptions),g.state.next({isLoading:!1})}),_updateFormState:t=>{r={...r,...t}},_disableForm:cr,_subjects:g,_proxyFormState:b,_setErrors:H,get _fields(){return u},get _formValues(){return n},get _state(){return d},set _state(t){d=t},get _defaultValues(){return l},get _names(){return h},set _names(t){h=t},get _formState(){return r},set _formState(t){r=t},get _options(){return s},set _options(t){s={...s,...t}}},trigger:ae,register:xe,handleSubmit:Be,watch:fr,setValue:M,getValues:Ue,reset:Ie,resetField:dr,clearErrors:or,unregister:Ae,setError:Re,setFocus:(t,i={})=>{const a=y(u,t),c=a&&a._f;if(c){const f=c.refs?c.refs[0]:c.ref;f.focus&&(f.focus(),i.shouldSelect&&f.select())}},getFieldState:Ce}}function Ir(e={}){const s=P.useRef(),r=P.useRef(),[u,l]=P.useState({isDirty:!1,isValidating:!1,isLoading:J(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:J(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...Ur(e),formState:u});const n=s.current.control;return n._options=e,xr({subject:n._subjects.state,next:d=>{Ar(d,n._proxyFormState,n._updateFormState,!0)&&l({...n._formState})}}),P.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),P.useEffect(()=>{if(n._proxyFormState.isDirty){const d=n._getDirty();d!==u.isDirty&&n._subjects.state.next({isDirty:d})}},[n,u.isDirty]),P.useEffect(()=>{e.values&&!Z(e.values,r.current)?(n._reset(e.values,n._options.resetOptions),r.current=e.values,l(d=>({...d}))):n._resetDefaultValues()},[e.values,n]),P.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),P.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),P.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),s.current.formState=Fr(u,n),s.current}var Xe=function(e,s,r){if(e&&"reportValidity"in e){var u=y(r,s);e.setCustomValidity(u&&u.message||""),e.reportValidity()}},lr=function(e,s){var r=function(l){var n=s.fields[l];n&&n.ref&&"reportValidity"in n.ref?Xe(n.ref,l,e):n.refs&&n.refs.forEach(function(d){return Xe(d,l,e)})};for(var u in s.fields)r(u)},Cr=function(e,s){s.shouldUseNativeValidation&&lr(e,s);var r={};for(var u in e){var l=y(s.fields,u),n=Object.assign(e[u]||{},{ref:l&&l.ref});if(Rr(s.names||Object.keys(e),u)){var d=Object.assign({},y(r,u));x(d,"root",n),x(r,u,d)}else x(r,u,n)}return r},Rr=function(e,s){return e.some(function(r){return r.startsWith(s+".")})};function qr(e,s,r){return s===void 0&&(s={}),r===void 0&&(r={}),function(u,l,n){try{return Promise.resolve(function(d,h){try{var m=(s.context,Promise.resolve(e[r.mode==="sync"?"validateSync":"validate"](u,Object.assign({abortEarly:!1},s,{context:l}))).then(function(w){return n.shouldUseNativeValidation&&lr({},n),{values:r.raw?u:w,errors:{}}}))}catch(w){return h(w)}return m&&m.then?m.then(void 0,h):m}(0,function(d){if(!d.inner)throw d;return{values:{},errors:Cr((h=d,m=!n.shouldUseNativeValidation&&n.criteriaMode==="all",(h.inner||[]).reduce(function(w,b){if(w[b.path]||(w[b.path]={message:b.message,type:b.type}),m){var g=w[b.path].types,Q=g&&g[b.type];w[b.path]=rr(b.path,m,w,b.type,Q?[].concat(Q,b.message):b.message)}return w},{})),n)};var h,m}))}catch(d){return Promise.reject(d)}}}export{qr as o,Ir as u};
